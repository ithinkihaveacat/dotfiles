#!/usr/bin/env bash

usage() {
  cat <<EOF
Usage: $(basename "$0") DIRECTORY

Finds and prints the path of a base split APK in a given directory.

The script searches for files named '*_base_split.apk' or '*-base-split.apk'
within the specified directory. It prints the path of the first match and exits.

Arguments:
  DIRECTORY   The directory to search in.

Options:
  -h, --help  Display this help message and exit

Examples:
  # Find the base split APK in a directory
  $(basename "$0") /path/to/unzipped_apk_archive
EOF
  exit 0
}

if [[ "$1" == "-h" || "$1" == "--help" ]]; then
  usage
fi

if [ -z "$1" ]; then
  echo "$(basename "$0"): missing directory operand" >&2
  exit 1
fi

if [ ! -d "$1" ]; then
  echo "$(basename "$0"): '$1': No such directory" >&2
  exit 1
fi

find "$1" -maxdepth 1 \( -name "*_base_split.apk" -o -name "*-base-split.apk" \) -print -quit || echo
