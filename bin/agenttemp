#!/usr/bin/env bash

usage() {
  cat <<EOF
Usage: $(basename "$0")

Creates a temporary directory with the prefix "agent." in ~/workspace.
Ensures the workspace directory exists before creation.

Options:
  --help      Display this help message and exit

Examples:
  $(basename "$0")

The directory is created in \$HOME/workspace.
EOF
  exit 0
}

if [[ "${1:-}" == "--help" ]]; then
  usage
fi

# Ensure workspace directory exists
WORKSPACE="$HOME/workspace"
mkdir -p "$WORKSPACE"

# Create temporary directory using portable syntax (works on macOS and Linux)
# We avoid 'mktemp -p' which is GNU-specific.
mktemp -d "$WORKSPACE/agent.XXXXXX"
