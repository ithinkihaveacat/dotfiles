#!/usr/bin/env bash

# Check for context script
CONTEXT_CMD="bin/context"
if [ ! -f "$CONTEXT_CMD" ]; then
  if command -v context &> /dev/null; then
    CONTEXT_CMD="context"
  else
    echo "Error: context command not found." >&2
    exit 1
  fi
fi

# Locate pascal
PASCAL_CMD="pascal"
if ! command -v pascal &> /dev/null; then
  if [ -f "bin/pascal" ]; then
    PASCAL_CMD="bin/pascal"
  else
    echo "Error: pascal command not found." >&2
    exit 1
  fi
fi

# Execute
"$CONTEXT_CMD" dac-health-services | "$PASCAL_CMD" "$1"
