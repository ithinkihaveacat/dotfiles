#!/usr/bin/env bash

require() { hash "$@" || exit 127; }

require adb

# Check if device is available
if [ "$(adb get-state 2>/dev/null)" != "device" ]; then
  echo "error: no device connected" >&2
  exit 1
fi

# Returns package name of app that currently has focus

adb exec-out dumpsys window displays | grep mCurrentFocus | grep -oE '{.*?}' | awk -F '[{} ]+' '{ print $4 }' | awk -F '/' '{ print $1 }'
